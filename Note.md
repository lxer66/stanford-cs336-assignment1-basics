## 配置环境

为了清晰起见，我将两种情况的理论步骤和对应命令归纳如下：

---

### 情况 A：配置文件无需改动（直接使用现有环境）

当你刚 `git clone` 下来一个项目，且该项目已经包含 `pyproject.toml` 和 `uv.lock` 时。

1. **理论逻辑**：你需要让 `uv` 根据现有的“锁文件”（lockfile）创建一个完全一致的本地虚拟环境。
2. **执行命令**：
```bash
uv sync

```


* **背后发生了什么**：`uv` 会在当前目录创建 `.venv`，并按照 `uv.lock` 里的确切版本下载所有依赖。这保证了你的环境和助教的环境是 1:1 还原的。



---

### 情况 B：需要修改配置文件（如更改 Python 版本或增减库）

当你发现需要修改 `pyproject.toml`（例如你刚才修改了 `requires-python`）时。

1. **第一步：修改文件**
* 手动编辑 `pyproject.toml` 并保存。


2. **第二步：更新锁文件（重新计算依赖）**
* **执行命令**：
```bash
uv lock

```


* **理论逻辑**：因为你改了“意图”（TOML），旧的“结果”（LOCK）就不再有效了。这个命令会重新扫描依赖关系，计算出一套新的、没有冲突的版本方案，并更新 `uv.lock`。


3. **第三步：同步环境**
* **执行命令**：
```bash
uv sync

```


* **理论逻辑**：根据更新后的 `uv.lock`，把 `.venv` 里的包进行增删改，确保本地环境与新配置同步。



---

### 💡 专家的“懒人提示” (Shortcut)

在实际开发中，`uv` 非常聪明。即使你修改了 `pyproject.toml` 后**直接**运行：

```bash
uv run pytest

```

`uv` 也会在后台自动执行 `lock` 和 `sync` 的逻辑。它会检测到配置文件已更改，先静默更新环境，然后再执行命令。

---
